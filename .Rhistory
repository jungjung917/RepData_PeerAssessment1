sqldf("select pwgtp1 from acs where AGEP < 50")
acs <- read.csv.sql("Fsspid.csv",sep = ",")
disconnect("Fsspid.csv")
disConnect("Fsspid.csv")
library(RPostgreSQL)
sqldf("select pwgtp1 from acs where AGEP < 50")
sqldf("select * from acs")
sqldf("select unique AGEP from acs")
sqldf("select distinct AGEP from acs")
library(XML)
fileUrl<-"http://biostat.jhsph.edu/~jleek/contact.html"
doc<-xmlTreePrase(fileUrl,useInternal = TRUE)
doc<-xmlTreePrase(fileUrl,useInternal = TRUE)
doc<-htmlTreePrase(fileUrl,useInternal = TRUE)
library(XML)
fileUrl<-"http://biostat.jhsph.edu/~jleek/contact.html"
doc <- htmlTreePrase(fileUrl,useInternal = TRUE)
doc <- htmlTreeParse(fileUrl,useInternal = TRUE)
doc2 <- xmlTreeParse(fileUrl,useInternal = TRUE)
rootNode <- xmlRoot(doc2)
doc2 <- xmlTreeParse(fileUrl,useInternal = TRUE)
xx <- xPathSApply(doc,xmlValue)
xx <- xpathSApply(doc,xmlValue)
xx <- readLines(doc)
x[10]
xx[10]
doc <- xmlTreeParse(fileUrl,useInternal = TRUE)
library(XML)
fileUrl<-"http://biostat.jhsph.edu/~jleek/contact.html"
doc <- xmlTreeParse(fileUrl,useInternal = TRUE)
doc <- htmlTreeParse(fileUrl,useInternal = TRUE)
nchar(capture.output(doc)[7])
nchar(capture.output(doc)[10])
nchar(capture.output(doc)[20])
doc <- xmlTreeParse(fileUrl,useInternal = TRUE)
xx<-readLines(doc)
destfile <- "/Users/zhengshizhao/lecture_yale/courseea_DEC/part2/Get&CleanDAta/week2/contact.html"
doc <- download.file(fileUrl,destfile)
nchar(capture.output(doc)[20])
nchar(capture.output(doc)[10])
nchar(readLines(doc))
nchar(readLines(doc)[10])
xx <- readLines(doc)
head(doc)
doc
doc
fileUrl<-"http://biostat.jhsph.edu/~jleek/contact.html"
destfile <- "/Users/zhengshizhao/lecture_yale/courseea_DEC/part2/Get&CleanDAta/week2/contact.html"
doc <- download.file(fileUrl,destfile)
list.files()
xx <- readLines("contact.html")
xx[10]
nchar(xx[10])
nchar(xx[20])
nchar(xx[30])
nchar(xx[100])
fileUrl1 <- "http://www.cpc.ncep.noaa.gov/data/indices/wksst8110.for"
destfile1 <- "/Users/zhengshizhao/lecture_yale/courseea_DEC/part2/Get&CleanDAta/week2/wksst8110.for"
download.file(fileUrl,destfile)
download.file(fileUrl1,destfile1)
head("wksst8110.for")
wksst8110.for
list.files()
fileUrl1 <- "https://d396qusza40orc.cloudfront.net/getdata%2Fwksst8110.for"
destfile1 <- "/Users/zhengshizhao/lecture_yale/courseea_DEC/part2/Get&CleanDAta/week2/wksst8110.for"
download.file(fileUrl1,destfile1)
method <- "curl"
download.file(fileUrl1,destfile1,method)
destfile1 <- "/Users/zhengshizhao/lecture_yale/courseea_DEC/part2/Get&CleanDAta/week2/wksst8110.txt"
download.file(fileUrl1,destfile1,method)
x<- ("wksst8110.txt", widths=c(10,9,4,9,4,9,4,9,4))
x<- read.table("wksst8110.txt", widths=c(10,9,4,9,4,9,4,9,4))
x<- read.fwf("wksst8110.txt", widths=c(10,9,4,9,4,9,4,9,4))
head(x)
x<- read.fwf("wksst8110.txt", widths=c(10,9,4,9,4,9,4,9,4),skip=4)
head(x)
sum(x$V4)
install.packages("knitr")
library(slidify)
install.packages("xtable")
setwd("/Users/zhengshizhao/lecture_yale/courseea_DEC/part2/PeproducibleResearch/week2/RepData_PeerAssessment1")
data <- read.csv(unz("activity.zip", "activity.csv"), header=T, sep=",")
head(data)
head(data,nrow=[100:105])
head(data)
data1 <- data[!rowSums(is.na[data[c("steps","date","interval")])), ]
data1 <- data[!rowSums(is.na[data[c("steps","date","interval")]), ]
data1 <- data[!rowSums(is.na(data[c("steps","date","interval")])), ]
head(data1)
summary(data)
class(data$date)
data$date <- as.Date(data$date,"%Y-%m-%d")
head(data)
data$date <- as.Date(data$date,"%Y/%m/%d")
head(data)
data$DateTime = as.POSIXct(strptime(data$date, format="%Y%m/%d"))
head(data)
data <- read.csv(unz("activity.zip", "activity.csv"), header=T, sep=",",
colClasses = c("numeric","character","numeric"))
head(data)
data$DateTime = as.POSIXct(strptime(data$date, format="%Y%m/%d"))
head(data)
data$DateTime = as.Date(strptime(data$date, format="%Y%m/%d"))
head(data)
data$DateTime = as.Date(strptime(data$date, format="%Y-%m-%d"))
head(data)
data <- read.csv(unz("activity.zip", "activity.csv"), header=T, sep=",",
colClasses = c("numeric","character","numeric"))
data$date = as.Date(strptime(data$date, format="%Y-%m-%d"))
head(data)
data1 <- data[!rowSums(is.na(data[c("steps","date","interval")])), ]
head(data1)
library(ggplot)
library(ggplot2)
tail(data1)
head(data)
summary(data1)
data$date <- as.factor(data$date)
data1 <- data[!rowSums(is.na(data[c("steps","date","interval")])), ]
summary(data)
hist(data1$steps)
hist(data1$steps~data1$date)
summary(data)
tail(data)
str(data)
str(data1)
x <- c(1,1,1,2,2,2,3,3,3)
z <- split(x,x)
z
mapply(sum,x)
mapply(sum,x,y)
subdata1 <- split(data1,data1$date)
head(subdata1)
str(subdata1)
mapply(mean,subdata1$steps)
mapply(mean,subdata1$steps)
d <- mapply(mean,subdata1$steps)
d
d <- mapply(mean,2,subdata1$steps)
d <- mapply(mean,1,subdata1$steps)
sapply(subdata1$steps, sum)
str(subdata1)
sapply(subdata1[1,], sum)
sapply(subdata1[,1], sum)
aggregate(data1,by=list(data1$date),FUN=sum)
aggregate(data1$steps,by=data1$date,FUN=sum)
aggregate(data1$steps,by=list(data1$date),FUN=sum)
sumsteps <- aggregate(data1$steps,by=list(data1$date),FUN=sum)
hist(sumsteps$x)
sumsteps$x
ggplot(sumsteps, aes(x)) + geom_histogram(binwidth=.5)
library(ggplot2)
ggplot(sumsteps, aes(x=x)) + geom_histogram(binwidth=1)
sumsteps$x
ggplot(sumsteps, aes(sumsteps$x)) + geom_histogram(binwidth=1)
sumsteps[2]
ggplot(sumsteps, aes(sumsteps[2])) + geom_histogram(binwidth=1)
hist(sumsteps[2])
sumsteps[2]
hist(as.numerix(sumsteps[2]))
hist(as.numeric(sumsteps[2]))
x <- sumsteps[2]
x
hist(x)
hist(as.numeric(x))
ggplot(x, aes(x) + geom_histogram(binwidth=1)
library(ggplot2)
ggplot(x, aes(x))+ geom_histogram(binwidth=1)
g <- ggplot(sumsteps, aes(x))
p <- g + geom_his()
p <- g + geom_histogram()
colnames(sumsteps) <- c("date","steps")
head(sumsteps)
g <- ggplot(sumsteps, aes(steps))
p <- g + geom_histogram()
print(p)
str(data1)
summary(data)
mean(sumsteps$steps)
median(sumsteps$steps)
meansteps <- mean(sumsteps$steps)
mediansteps <- median(sumsteps$steps)
data <- read.csv(unz("activity.zip", "activity.csv"), header=T, sep=",",
data <- read.csv(unz("activity.zip", "activity.csv"), header=T, sep=",",
colClasses = c("numeric","character","numeric"))
data <- read.csv(unz("activity.zip", "activity.csv"), header=T, sep=",",
colClasses = c("numeric","character","numeric"))
data1 <- data[!rowSums(is.na(data[c("steps","date","interval")])), ]
sumsteps <- aggregate(data1$steps,by=list(data1$date),FUN=sum)
colnames(sumsteps) <- c("date","steps")
head(sumsteps)
library(ggplot2)
g <- ggplot(sumsteps, aes(steps))
p <- g + geom_histogram()
p <- g + geom_histogram(binwidth=.5, colour="black", fill="white")
print(p)
p <- g + geom_histogram(binwidth=1, colour="black", fill="white")
p <- g + geom_histogram(binwidth=10, colour="black", fill="white")
print(p)
p <- g + geom_histogram(colour="black", fill="white")
print(p)
hist(sumsteps$steps)
hist(sumsteps$steps,breaks=10,col="red")
hist(sumsteps$steps,breaks=10,col="black", xlab="Total Steps per date")
hist(sumsteps$steps,breaks=10,col="grey", xlab="Total Steps per date")
hist(sumsteps$steps,breaks=10,col="grey", xlab="Tatal Steps",
main="Total Steps per date")
meansteps <- mean(sumsteps$steps)
mediansteps <- median(sumsteps$steps)
data <- read.csv(unz("activity.zip", "activity.csv"), header=T, sep=",")
data$date <- as.Date(data$date)
meansteps <- mean(sumsteps$steps)
meansteps <- mean(sumsteps$steps)
meansteps
mediansteps
head(data1)
plot(data1$interval, data1$steps)
meanstpes <- aggregate(data1$steps,by=list(data1$date),FUN=mean)
colnames(sumsteps) <- c("date","steps")
plot(data1$interval, meanstpes$steps)
head(meanstpes)
meanstpes <- aggregate(data1$steps,by=list(data1$interval),FUN=mean)
head(meanstpes)
colnames(meanstpes) <- c("interval","meansteps")
plot(meanstpes$interval,meanstpes$meansteps)
plot(meanstpes$interval,meanstpes$meansteps,type="l")
plot(meanstpes$interval,meanstpes$meansteps,type="l",ylab="Average step", xlab="Time interval")
plot(meanstpes$interval,meanstpes$meansteps,type="l",ylab="Average steps", xlab="Time intervas")
max(meanstpes$meansteps)
summary(meanstpes$meansteps)
summary(meanstpes)
subset(meanstpes, meanstpes$meansteps == max(meanstpes$meansteps))
!rowSums(is.na(data[c("steps","date","interval")]))
rowSums(is.na(data[c("steps","date","interval")]))
sum(rowSums(is.na(data[c("steps","date","interval")])))
rowSums(is.na(data["steps"]))
sum(rowSums(is.na(data["steps"])))
sum(rowSums(is.na(data["date"])))
sum(rowSums(is.na(data["interval"])))
sum(rowSums(is.na(data[2])))
sum(rowSums(is.na(data[3])))
sum(rowSums(is.na(data[1])))
data[1]
data[2]
data[3]
summary(data[3])
sum(rowSums(is.na(data[c("steps","date","interval")])))
meanstpes2 <- aggregate(data1$steps,by=list(data1$date),FUN=mean)
colnames(meanstpes2) <- c("steps","date")
meanstpes2 <- aggregate(data1$steps,by=list(data1$date),FUN=mean)
head(meanstpes2)
plot(meanstpes2$date,meanstpes2$steps)
head(meanstpes2)
colnames(meanstpes2) <- c("steps","date")
head(meanstpes2)
colnames(meanstpes2) <- c("date","steps")
head(meanstpes2)
plot(meanstpes2$date,meanstpes2$steps)
plot(meanstpes2$date,meanstpes2$steps,type = "l")
meanstpes2$date <- as.Date(meanstpes2$date)
plot(meanstpes2$date,meanstpes2$steps,type = "l")
nasteps <- rowSums(is.na(data[c("steps","date","interval")]))
nasteps
nasteps <- is.na(data[1])
nasteps
nasteps <- rowSums(is.na(data[1]))
nasteps
nasteps <- is.na(data[1])
nasteps[1]
nrow(data)
data[1]
data[1,1]
meanstpes2[1]
nasteps <- is.na(data[1])
for (i in 1:nrow(data) {
if(nasteps[i]) {
data[1,i] <- meanstpes2[2,date==data[2,i]]
}
}
m <- nrow(data)
m
nasteps <- is.na(data[1])
for (i in 1:nrow(data)) {
if(nasteps[i]) {
data[1,i] <- meanstpes2[2,date==data[2,i]]
}
}
meanstpes2[1]
for (i in 1:nrow(data)) {
if(nasteps[i]) {
data[1,i] <- meanstpes2[2,which(meanstpes2[,"date"]==data[2,i])]
}
}
data[1,i] <- meanstpes2[2, meanstpes2[,"date"]==data[2,i]]
for (i in 1:nrow(data)) {
if(nasteps[i]) {
data[1,i] <- meanstpes2[2, meanstpes2[,"date"]==data[2,i]]
}
}
datafilled <- data
datafilled[1,i] <- meanstpes2[2, meanstpes2[,"date"]==data[2,1]]
datafilled[1]
datafilled[1,1]
datafilled[1,1] <- meanstpes2[2, meanstpes2[,"date"]==data[2,1]]
meanstpes2[2, meanstpes2[,"date"]==data[2,1]]
meanstpes2[2, ]
meanstpes2[1, ]
meanstpes2[,1 ]
meanstpes2[ ,2]
meanstpes2[1,2]
meanstpes2[,2]
datafilled[2,1]
datafilled[1,2]
datafilled[,2]
datafilled[,2]
datafilled[,1]
datafilled[1,1]
datafilled[1,2]
meanstpes2[1,2]
meanstpes2[2,2]
meanstpes2[,1]
meanstpes2[1,1]
meanstpes2[2,1]
datafilled[1,2]
meanstpes2[,"date" == datafilled[1,2]]
meanstpes2[,which("date" == datafilled[1,2])]
meanstpes2[which("date" == datafilled[1,2]),]
meanstpes2[ meanstpes2$date== datafilled[1,2]),]
meanstpes2[ meanstpes2$date== datafilled[1,2],]
meanstpes2[ ,meanstpes2$date== datafilled[1,2]]
meanstpes2[,2]
meanstpes2[ meanstpes2$date== datafilled[1,2]]
meanstpes2[ meanstpes2$date== datafilled[1,2],]
meanstpes2[meanstpes2$date== datafilled[1,2],]
meanstpes2[meanstpes2$date== datafilled[1,2],1]
meanstpes2[meanstpes2$date== datafilled[1,2],2]
meanstpes2[,2]
datafilled[1,2]
datafilled$date <- as.Date(datafilled$date)
meanstpes2[meanstpes2$date== datafilled[1,2],]
meanstpes2[meanstpes2$date== datafilled[1,2],1]
meanstpes2[,meanstpes2$date== datafilled[1,2]]
meanstpes2[meanstpes2$date== datafilled[1,2],]
for (i in 1:nrow(data)) {
if(nasteps[i]) {
datadatafilled[1,i] <- mean(meanstpes2$steps)
}
}
for (i in 1:nrow(data)) {
if(nasteps[i]) {
datafilled[1,i] <- mean(meanstpes2$steps)
}
}
datafilled[,1]
datafilled[,2]
datafilled[1,1]
datafilled[2,1]
for (i in 1:nrow(data)) {
if(nasteps[i]) {
datafilled[i,1] <- mean(meanstpes2$steps)
}
}
head(datafilled)
plot(meanstpes2$date,meanstpes2$steps,type = "l",ylab="Average steps", xlab="Date")
sumsteps1 <- aggregate(datafilled$steps,by=list(datafilled$date),FUN=sum)
sumsteps1
main="Total Steps per date")
hist(sumsteps1$steps,breaks=10,col="grey", xlab="Tatal Steps",
main="Total Steps per date")
colnames(sumsteps) <- c("date","steps")
hist(sumsteps1$steps,breaks=10,col="grey", xlab="Tatal Steps",
main="Total Steps per date")
colnames(sumsteps1) <- c("date","steps")
hist(sumsteps1$steps,breaks=10,col="grey", xlab="Tatal Steps",
main="Total Steps per date")
meansteps1 <- mean(sumsteps1$steps)
mediansteps1 <- median(sumsteps1$steps)
meansteps1
mediansteps1
meansteps
mediansteps
head(datafilled)
datafilled$date <- as.Date(datafilled$date)
is.weekdays(datafilled$date)
weekdays(datafilled$date)
datafilled$date1 <- weekdays(datafilled$date)
head(datafilled)
subdatafilled1<- subset(datafilled, date1 = c("Monday","Tuesday","Wednesday",
"Thursday","Friday"))
tail(subdatafilled1)
str(subdatafilled1)
summary(subdatafilled1)
as.factor(subdatafilled1$date1)
subdatafilled1<- subset(datafilled, date1 == c("Monday","Tuesday","Wednesday",
"Thursday","Friday"))
subdatafilled1<- subset(datafilled, datafilled$date1 == c("Monday","Tuesday","Wednesday",
"Thursday","Friday"))
subdatafilled1<- subset(datafilled, datafilled$date1 == c("Monday","Tuesday",
"Wednesday","Thursday","Friday"))
subdatafilled1<- subset(datafilled, datafilled$date1 == "Sunday" |
datafilled$date1 == "Saturday")
str(subdatafilled1)
as.factor(subdatafilled1$date1)
subdatafilled2<- subset(datafilled, datafilled$date1 !== "Sunday" &
datafilled$date1 !== "Saturday")
subdatafilled2<- subset(datafilled, datafilled$date1 != "Sunday" &
datafilled$date1 != "Saturday")
as.factor(subdatafilled2$date1)
weekend(datafilled$date)
weekends(datafilled$date)
datafilled$date1[,4]
datafilled[,4]
datafilled[1,4]
datafilled[2,4]
fori in 1:nrow(datafilled)) {
if (datafilled[i,4] == "Sunday" | datafilled[i,4] == "Saturday") {
datafilled[i,5] <- "weekend"
}
else {
datafilled[i,5] <- "weekday"
}
}
nrow(datafilled)
for(i in 1:nrow(datafilled) {
if (datafilled[i,4] == "Sunday" | datafilled[i,4] == "Saturday") {
datafilled[i,5] <- "weekend"
}
else {
datafilled[i,5] <- "weekday"
}
}
for(i in 1:nrow(datafilled)) {
if (datafilled[i,4] == "Sunday" | datafilled[i,4] == "Saturday") {
datafilled[i,5] <- "weekend"
}
else {
datafilled[i,5] <- "weekday"
}
}
head(datafilled)
datafilled$date2 <- weekdays(datafilled$date)
for(i in 1:nrow(datafilled)) {
if (datafilled[i,4] == "Sunday" | datafilled[i,4] == "Saturday") {
datafilled[i,5] <- "weekend"
}
else {
datafilled[i,5] <- "weekday"
}
}
head(datafilled)
datafilled <- data
for (i in 1:nrow(data)) {
if(nasteps[i]) {
datafilled[i,1] <- mean(meanstpes2$steps)
}
}
head(datafilled)
datafilled$date <- as.Date(datafilled$date)
datafilled$date1 <- weekdays(datafilled$date)
for(i in 1:nrow(datafilled)) {
if (datafilled[i,4] == "Sunday" | datafilled[i,4] == "Saturday") {
datafilled[i,"date2"] <- "weekend"
}
else {
datafilled[i,"date2"] <- "weekday"
}
}
head(datafilled)
as.factor(datafilled$date2)
head(datafilled, 3)
subdataweekday <- subset(datafilled, datafilled$date2 == "weekday")
subdataweend <- subset(datafilled, datafilled$date2 == "weekend")
meanstpesweekday <- aggregate(subdataweekday$steps,by=list(subdataweekday$interval),FUN=mean)
subdataweekend <- subset(datafilled, datafilled$date2 == "weekend")
meanstpesweekday <- aggregate(subdataweekday$steps,by=list(subdataweekday$interval),FUN=mean)
meanstpesweekend <- aggregate(subdataweekend$steps,by=list(subdataweekend$interval),FUN=mean)
par(mfcol = c(1,2),mar=c(5,5,3,2))
colnames(meanstpesweekday) <- c("interval","meansteps")
colnames(meanstpesweekend) <- c("interval","meansteps")
plot(meanstpesweekday$interval,meanstpesweekday$meansteps,type="l",ylab="Average steps", xlab="Time intervas")
plot(meanstpesweekday$interval,meanstpesweekday$meansteps,type="l",ylab="Average steps", xlab="Time intervas")
par(mfcol = c(2,1),mar=c(5,5,3,2))
plot(meanstpesweekday$interval,meanstpesweekday$meansteps,type="l",ylab="Average steps", xlab="Time intervas")
plot(meanstpesweekend$interval,meanstpesweekend$meansteps,type="l",ylab="Average steps", xlab="Time intervas")
par(mfcol = c(2,1),mar=c(5,5,3,2),ylab="Numbers of steps")
par(mfcol = c(2,1))
plot(meanstpesweekday$interval,meanstpesweekday$meansteps,type="l",ylab="Numbers of steps", xlab="Time intervas")
plot(meanstpesweekend$interval,meanstpesweekend$meansteps,type="l",ylab=" Number of steps", xlab="Time intervas")
View(my_pois)
par(mfcol = c(2,1),mar=c(5,5,1,1))
plot(meanstpesweekday$interval,meanstpesweekday$meansteps,type="l",ylab="Numbers of steps", xlab="Time intervas")
plot(meanstpesweekend$interval,meanstpesweekend$meansteps,type="l",ylab=" Number of steps", xlab="Time intervas")
par(mfcol = c(2,1),mar=c(5,5,3,1))
plot(meanstpesweekday$interval,meanstpesweekday$meansteps,type="l",ylab="Numbers of steps", xlab="Time intervas")
plot(meanstpesweekend$interval,meanstpesweekend$meansteps,type="l",ylab=" Number of steps", xlab="Time intervas")
par(mfcol = c(2,1),mar=c(5,5,2,1))
plot(meanstpesweekday$interval,meanstpesweekday$meansteps,type="l",ylab="Numbers of steps", xlab="Time intervas")
plot(meanstpesweekend$interval,meanstpesweekend$meansteps,type="l",ylab=" Number of steps", xlab="Time intervas")
par(mfcol = c(2,1),mar=c(3,3,2,2))
plot(meanstpesweekday$interval,meanstpesweekday$meansteps,type="l",ylab="Numbers of steps", xlab="Time intervas")
plot(meanstpesweekend$interval,meanstpesweekend$meansteps,type="l",ylab=" Number of steps", xlab="Time intervas")
par(mfcol = c(2,1),mar=c(4,4,2,2))
plot(meanstpesweekday$interval,meanstpesweekday$meansteps,type="l",ylab="Numbers of steps", xlab="Time intervas")
plot(meanstpesweekend$interval,meanstpesweekend$meansteps,type="l",ylab=" Number of steps", xlab="Time intervas")
library(knit)
library(knitr)
knit2html("PA1_template.html")
list.files()
png(filename="plot1")
hist(sumsteps$steps,breaks=10,col="grey", xlab="Tatal Steps",
main="Total Steps per date")
dev.off()
